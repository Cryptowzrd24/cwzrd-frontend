(()=>{var e="light"===(localStorage.toolbar_icon||"dark")?"_light.png":".png";chrome.storage.local.set({toolbar_icon:!1}),chrome.browserAction.setIcon({path:{19:"icon/icon19"+e,38:"icon/icon38"+e}}),chrome.browserAction.setTitle({title:"What Font (WhatFont. reload tab to enable)"}),chrome.browserAction.onClicked.addListener((function(e){chrome.tabs.sendRequest(e.id,{action:"initOrRestore"},(function(t){void 0===t&&(chrome.tabs.executeScript(e.id,{file:"libs/jquery.js"}),chrome.tabs.executeScript(e.id,{file:"libs/html2canvas.min.js"}),chrome.tabs.executeScript(e.id,{file:"chrome.js"}),chrome.browserAction.enable(e.id),chrome.browserAction.setTitle({title:"WhatFont"}),chrome.tabs.sendRequest(e.id,{action:"initOrRestore"},(function(){})),chrome.tabs.sendRequest(e.id,{action:"initOrRestore"},(function(){})),chrome.tabs.sendRequest(e.id,{action:"initOrRestore"},(function(){})))}))})),chrome.runtime.onInstalled.addListener((function(e){"install"===e.reason&&chrome.tabs.create({url:"https://whatfont.net/#info",selected:!0})})),chrome.runtime.onMessage.addListener((function(e,t,o){if("onload"==e.action){var i=t.tab.id;chrome.browserAction.enable(i),chrome.browserAction.setTitle({title:"WhatFont"})}else"getUid"==e.method&&o({})})),chrome.runtime.onMessageExternal.addListener((function(e,t,o){"ping"===e&&o({installed:!0})}))})();